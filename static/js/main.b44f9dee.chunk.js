(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a(64)},4:function(e,t){var a="https://kiuhmwwxi4.execute-api.us-east-1.amazonaws.com/dxm-api";e.exports={create:function(e,t,n){var i=new URL("".concat(a,"/").concat(t));return i.search=new URLSearchParams(n),fetch(i,{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return e},function(e){console.log(e)})},index:function(e){return fetch("".concat(a,"/").concat(e)).then(function(e){return e.json()}).then(function(e){return e},function(e){console.log(e)})},read:function(e,t){return fetch("".concat(a,"/").concat(t,"/").concat(e)).then(function(e){return e.json()}).then(function(e){return e},function(e){console.log(e)})},update:function(e,t){return fetch("".concat(a,"/").concat(t,"/").concat(e.id),{method:"PUT",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){return e},function(e){console.log(e)})},destroy:function(e,t){return fetch("".concat(a,"/").concat(t,"/").concat(e),{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){return e},function(e){console.log(e)})}}},64:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(33),c=a.n(r),s=a(10),o=a(15),l=function(){return i.a.createElement("div",{className:"ui stackable main menu"},i.a.createElement("div",{className:"header item"},"Digital eXperience Manager"),i.a.createElement("div",{className:"right menu"},i.a.createElement(s.b,{to:"/",className:"item"},"Content"),i.a.createElement(s.b,{to:"/assets",className:"item"},"Assets")))},u=a(1),d=a.n(u),m=a(2),p=a(5),h=a(6),f=a(8),v=a(7),b=a(9),E=a(4),y=a.n(E),C="https://dxm-site-repo.s3.amazonaws.com",g="https://dxm-content-lake.s3.amazonaws.com",N=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).listContent=Object(m.a)(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,y.a.index(e.apiResource);case 3:a=t.sent,e.setState({isLoading:!1,nodes:a});case 5:case"end":return t.stop()}},t)})),e.deleteContent=function(){var t=Object(m.a)(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,y.a.destroy(a,e.apiResource);case 3:e.listContent(),e.setState({isLoading:!1});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.onPreview=function(e){window.open("".concat(C,"/").concat(e.contentType,"/").concat(e.id,".html"))},e.onShowLake=function(e){window.open("".concat(g,"/").concat(e.contentType,"/").concat(e.id,".json"))},e.apiResource="nodes",e.state={nodes:[],isLoading:!1},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"renderList",value:function(){var e=this;return this.state.nodes.filter(function(e){return"asset"!==e.contentType}).map(function(t){var a="/content/edit/".concat(t.id);return i.a.createElement("tr",{key:t.id},i.a.createElement("td",null,i.a.createElement(s.b,{to:a,className:"node"},t.title)),i.a.createElement("td",null,t.contentType),i.a.createElement("td",{className:"collapsing"},t.id),i.a.createElement("td",{className:"collapsing"},t.dateModified),i.a.createElement("td",{className:"collapsing"},i.a.createElement("div",{className:"ui icon buttons"},i.a.createElement("button",{className:"ui basic button","data-tooltip":"Show JSON","data-position":"top right",onClick:function(){return e.onShowLake(t)}},i.a.createElement("i",{className:"code icon"})),i.a.createElement("button",{className:"ui basic button","data-tooltip":"Preview in Browser","data-position":"top right",onClick:function(){return e.onPreview(t)}},i.a.createElement("i",{className:"desktop icon"})),i.a.createElement("button",{className:"ui basic button","data-tooltip":"Delete Content","data-position":"top right",onClick:function(){return e.deleteContent(t.id)}},i.a.createElement("i",{className:"trash alternate outline icon"})))))})}},{key:"componentDidMount",value:function(){this.listContent()}},{key:"render",value:function(){var e="ui ".concat(this.state.isLoading?"active":""," inverted dimmer");return i.a.createElement("div",null,i.a.createElement(s.b,{to:"/content/new",className:"ui right floated primary button"},i.a.createElement("i",{className:"plus sqaure icon"}),"New Content"),i.a.createElement("h1",null,"Content List"),i.a.createElement("div",{className:e},i.a.createElement("div",{className:"ui text loader"},"Working...")),i.a.createElement("table",{className:"ui celled striped compact table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Title"),i.a.createElement("th",null,"Content Type"),i.a.createElement("th",null,"ID"),i.a.createElement("th",null,"Date Modified"),i.a.createElement("th",null))),i.a.createElement("tbody",null,this.renderList())))}}]),t}(i.a.Component),w=a(18),x="https://dxm-site-repo.s3.amazonaws.com",S="https://dxm-content-lake.s3.amazonaws.com",k=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).handleChange=function(t){var a=Object(w.a)({},e.state).node,n=t.target,i=n.name,r=n.value;a[i]=r,e.setState({node:a})},e.onFormSubmit=function(t){t.preventDefault(),e.props.onFormSubmit(e.state.node)},e.onFormCancel=function(t){t.preventDefault(),e.props.onFormCancel()},e.onPreview=function(){var t=e.state.node;window.open("".concat(x,"/").concat(t.contentType,"/").concat(t.id,".html"))},e.onShowLake=function(){var t=e.state.node;window.open("".concat(S,"/").concat(t.contentType,"/").concat(t.id,".json"))},e.onSaveAndPreview=function(t){e.onFormSubmit(t),e.onPreview(t)},e.apiResource="compose",e.state={node:{id:"",contentType:"content",title:"",subTitle:"",copyText:"",dateCreated:"",dateModified:""},isNew:!1},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"nodeToState",value:function(){this.props.node.id&&this.props.node.id!==this.state.node.id&&this.setState({node:this.props.node})}},{key:"componentDidMount",value:function(){this.setState({isNew:this.props.isNew}),this.nodeToState()}},{key:"componentDidUpdate",value:function(){this.nodeToState()}},{key:"render",value:function(){var e=this.state.node,t=null,a=null,n=null,r=null,c=null;return this.state.isNew||(t=i.a.createElement("div",{className:"disabled field"},i.a.createElement("label",{htmlFor:"id"},"ID"),i.a.createElement("input",{name:"id",type:"text",placeholder:"id",value:e.id,readOnly:!0})),a=i.a.createElement("div",{className:"disabled field"},i.a.createElement("label",{htmlFor:"dateCreated"},"Date Created"),i.a.createElement("input",{name:"dateCreated",type:"text",placeholder:"date created",value:e.dateCreated,readOnly:!0})),n=i.a.createElement("div",{className:"disabled field"},i.a.createElement("label",{htmlFor:"dateModified"},"Date Modified"),i.a.createElement("input",{name:"dateModified",type:"text",placeholder:"date modifed",value:e.dateModified,readOnly:!0})),r=i.a.createElement("button",{className:"ui button",onClick:this.onPreview},i.a.createElement("i",{className:"desktop icon"}),"Preview"),c=i.a.createElement("button",{className:"ui button",onClick:this.onShowLake},i.a.createElement("i",{className:"code icon"}),"Content Lake")),i.a.createElement("div",{className:"ui form"},i.a.createElement("p",null,"All fields must have values. Validation to be added."),t,i.a.createElement("div",{className:"required field"},i.a.createElement("label",{htmlFor:"contentType"},"Content Type"),i.a.createElement("select",{name:"contentType",type:"text",placeholder:"content type",value:e.contentType,onChange:this.handleChange},i.a.createElement("option",{value:""},"Content Type"),i.a.createElement("option",{value:"content"},"Content"))),i.a.createElement("div",{className:"required field"},i.a.createElement("label",{htmlFor:"title"},"Title"),i.a.createElement("input",{name:"title",type:"text",placeholder:"title",value:e.title,onChange:this.handleChange})),i.a.createElement("div",{className:"required field"},i.a.createElement("label",{htmlFor:"subTitle"},"Subtitle"),i.a.createElement("input",{name:"subTitle",type:"text",placeholder:"subtitle",value:e.subTitle,onChange:this.handleChange})),i.a.createElement("div",{className:"required field"},i.a.createElement("label",{htmlFor:"copyText"},"Copy Text"),i.a.createElement("textarea",{name:"copyText",placeholder:"copy text",value:e.copyText,onChange:this.handleChange})),a,n,i.a.createElement("div",null,i.a.createElement("button",{className:"ui secondary basic button",title:"Cancel",onClick:this.onFormCancel},i.a.createElement("i",{className:"close icon"}),"Cancel"),c,r,i.a.createElement("button",{className:"ui primary button",title:"Save",onClick:this.onFormSubmit},i.a.createElement("i",{className:"save icon"}),"Save")))}}]),t}(i.a.Component),O=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).createContent=function(){var t=Object(m.a)(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,y.a.create(a,e.apiResource);case 3:e.setState({isLoading:!1,redirect:!0});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.onFormCancel=function(){e.setState({redirect:!0})},e.apiResource="nodes",e.state={node:{id:"",contentType:"",title:"",subTitle:"",copyText:"",dateCreated:"",dateModified:""},redirect:!1,isLoading:!1},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){if(this.state.redirect)return i.a.createElement(o.a,{to:"/"});var e="ui ".concat(this.state.isLoading?"active":""," inverted dimmer");return i.a.createElement("div",null,i.a.createElement("h1",null,"New Content"),i.a.createElement("div",{className:e},i.a.createElement("div",{className:"ui text loader"},"Working...")),i.a.createElement(k,{node:this.state.node,isNew:!0,onFormSubmit:this.createContent,onFormCancel:this.onFormCancel}))}}]),t}(i.a.Component),j=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).showContent=function(){var t=Object(m.a)(d.a.mark(function t(a){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,y.a.read(a,e.apiResource);case 3:n=t.sent,e.setState({node:n,isLoading:!1});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.updateContent=Object(m.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,y.a.update(e.state.node,e.apiResource);case 3:e.setState({isLoading:!1,redirect:!0});case 4:case"end":return t.stop()}},t)})),e.onFormCancel=function(){e.setState({redirect:!0})},e.apiResource="nodes",e.state={node:{id:"",contentType:"",title:"",subTitle:"",copyText:"",dateCreated:"",dateModified:""},redirect:!1,isLoading:!1},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.showContent(this.props.match.params.id)}},{key:"render",value:function(){if(this.state.redirect)return i.a.createElement(o.a,{to:"/"});var e="ui ".concat(this.state.isLoading?"active":""," inverted dimmer");return i.a.createElement("div",null,i.a.createElement("h1",null,"Edit Content"),i.a.createElement("div",{className:e},i.a.createElement("div",{className:"ui text loader"},"Working...")),i.a.createElement(k,{node:this.state.node,onFormSubmit:this.updateContent,onFormCancel:this.onFormCancel}))}}]),t}(i.a.Component),F=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).listAssets=Object(m.a)(d.a.mark(function t(){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,y.a.index(e.apiResource);case 3:a=t.sent,e.setState({isLoading:!1,assets:a});case 5:case"end":return t.stop()}},t)})),e.deleteAsset=function(){var t=Object(m.a)(d.a.mark(function t(a){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,y.a.destroy(a,e.apiResource);case 3:e.listAssets(),e.setState({isLoading:!1});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.apiResource="assets",e.state={assets:[],isLoading:!1},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.listAssets()}},{key:"renderList",value:function(){var e=this;return this.state.assets.filter(function(e){return"asset"===e.contentType}).map(function(t){var a="/assets/edit/".concat(t.id);return i.a.createElement("div",{className:"item",key:t.id},i.a.createElement("img",{className:"ui small image",src:t.url,alt:"alt text placeholder"}),i.a.createElement("div",{className:"content"},i.a.createElement(s.b,{to:a,className:"header"},t.title),i.a.createElement("div",{className:"description"},t.dateModified)),i.a.createElement("div",{className:"ui icon buttons right floated content"},i.a.createElement("button",{className:"ui basic button","data-tooltip":"Delete Asset","data-position":"top right",onClick:function(){return e.deleteAsset(t.id)}},i.a.createElement("i",{className:"trash alternate outline icon"}))))})}},{key:"render",value:function(){var e="ui ".concat(this.state.isLoading?"active":""," inverted dimmer");return i.a.createElement("div",null,i.a.createElement(s.b,{to:"/assets/new",className:"ui right floated primary button"},i.a.createElement("i",{className:"plus sqaure icon"}),"New Asset"),i.a.createElement("h1",null,"Asset List"),i.a.createElement("div",{className:e},i.a.createElement("div",{className:"ui text loader"},"Working...")),i.a.createElement("div",{className:"ui divided relaxed list"},this.renderList()))}}]),t}(i.a.Component),T=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).handleChange=function(t){var a=Object(w.a)({},e.state).asset,n=t.target,i=n.name,r=n.value;a[i]=r,e.setState({asset:a})},e.handleFileChange=function(t){e.setState({selectedFile:t.target.files[0]})},e.onFormSubmit=function(t){t.preventDefault();var a={asset:e.state.asset,file:e.state.selectedFile};e.props.onFormSubmit(a)},e.onFormCancel=function(t){t.preventDefault(),e.props.onFormCancel()},e.apiResource="assets",e.state={asset:{id:"",contentType:"asset",title:"",dateCreated:"",dateModified:"",url:""},isNew:!1,selectedFile:""},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"assetToState",value:function(){this.props.asset.id&&this.props.asset.id!==this.state.asset.id&&this.setState({asset:this.props.asset})}},{key:"componentDidMount",value:function(){this.setState({isNew:this.props.isNew}),this.assetToState()}},{key:"componentDidUpdate",value:function(){this.assetToState()}},{key:"render",value:function(){var e=this.state.asset,t=null,a=null,n=null,r=null;return this.state.isNew?a=i.a.createElement("div",{className:"required field"},i.a.createElement("label",{htmlFor:"file"},"File"),i.a.createElement("input",{name:"fileName",type:"file",onChange:this.handleFileChange})):(t=i.a.createElement("div",{className:"disabled field"},i.a.createElement("label",{htmlFor:"id"},"ID"),i.a.createElement("input",{name:"id",type:"text",placeholder:"id",value:e.id,readOnly:!0})),n=i.a.createElement("div",{className:"disabled field"},i.a.createElement("label",{htmlFor:"dateCreated"},"Date Created"),i.a.createElement("input",{name:"dateCreated",type:"text",placeholder:"date created",value:e.dateCreated,readOnly:!0})),r=i.a.createElement("div",{className:"disabled field"},i.a.createElement("label",{htmlFor:"dateModified"},"Date Modified"),i.a.createElement("input",{name:"dateModified",type:"text",placeholder:"date modifed",value:e.dateModified,readOnly:!0})),a=i.a.createElement("div",{className:"field"},i.a.createElement("label",{htmlFor:"dateModified"},"File"),i.a.createElement("img",{className:"ui big image",src:this.state.asset.url,alt:"alt text placeholder"}))),i.a.createElement("div",{className:"ui form"},i.a.createElement("p",null,"All fields must have values. Validation to be added."),t,i.a.createElement("div",{className:"required field"},i.a.createElement("label",{htmlFor:"contentType"},"Content Type"),i.a.createElement("select",{name:"contentType",type:"text",placeholder:"content type",value:e.contentType,onChange:this.handleChange},i.a.createElement("option",{value:""},"Content Type"),i.a.createElement("option",{value:"asset"},"Asset"))),i.a.createElement("div",{className:"required field"},i.a.createElement("label",{htmlFor:"title"},"Title"),i.a.createElement("input",{name:"title",type:"text",placeholder:"title",value:e.title,onChange:this.handleChange})),a,n,r,i.a.createElement("div",null,i.a.createElement("button",{className:"ui secondary basic button",title:"Cancel",onClick:this.onFormCancel},i.a.createElement("i",{className:"close icon"}),"Cancel"),i.a.createElement("button",{className:"ui primary button",title:"Save",onClick:this.onFormSubmit},i.a.createElement("i",{className:"save icon"}),"Save")))}}]),t}(i.a.Component),L=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).showAsset=function(){var t=Object(m.a)(d.a.mark(function t(a){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,y.a.read(a,e.apiResource);case 3:n=t.sent,e.setState({asset:n,isLoading:!1});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.updateAsset=Object(m.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,y.a.update(e.state.asset,e.apiResource);case 3:e.setState({isLoading:!1,redirect:!0});case 4:case"end":return t.stop()}},t)})),e.onFormCancel=function(){e.setState({redirect:!0})},e.apiResource="assets",e.state={asset:{id:"",contentType:"",title:"",dateCreated:"",dateModified:"",url:""},redirect:!1,isLoading:!1,selectedFile:""},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.showAsset(this.props.match.params.id)}},{key:"render",value:function(){if(this.state.redirect)return i.a.createElement(o.a,{to:"/assets"});var e="ui ".concat(this.state.isLoading?"active":""," inverted dimmer");return i.a.createElement("div",null,i.a.createElement("h1",null,"Edit Asset"),i.a.createElement("div",{className:e},i.a.createElement("div",{className:"ui text loader"},"Working...")),i.a.createElement(T,{asset:this.state.asset,onFormSubmit:this.updateAsset,onFormCancel:this.onFormCancel}))}}]),t}(i.a.Component),A=a(36),M=a.n(A),D="dxm-file-repo",R="assets",P=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(f.a)(this,Object(v.a)(t).call(this))).createAsset=function(){var t=Object(m.a)(d.a.mark(function t(a){var n,i,r,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.asset,i=a.file,e.setState({isLoading:!0}),t.next=4,e.getPresignedUrl(n,i);case 4:return r=t.sent,c=r.uploadURL,t.next=8,e.uploadAsset(c,i);case 8:return n.url=t.sent,e.setState({asset:n}),t.next=12,y.a.create(n,e.apiResource);case 12:e.setState({isLoading:!1,redirect:!0});case 13:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.getPresignedUrl=function(){var t=Object(m.a)(d.a.mark(function t(a,n){var i,r,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={Bucket:D,Key:"".concat(R,"/").concat(n.name),ACL:"public-read",ContentType:n.type},r={getSignedUrl:!0},t.next=4,y.a.create(i,e.apiResource,r);case 4:return c=t.sent,t.abrupt("return",c);case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),e.uploadAsset=function(){var e=Object(m.a)(d.a.mark(function e(t,a){var n,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{ACL:"public-read","Content-Type":a.type},onUploadProgress:function(e){var t=Number.parseInt(e.loaded/a.size*100,10);console.log("Progress: ".concat(t,"%"))}},e.next=4,M.a.put(t,a,n);case 4:return i=e.sent,e.abrupt("return",i.config.url.split("?")[0]);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t,a){return e.apply(this,arguments)}}(),e.onFormCancel=function(){e.setState({redirect:!0})},e.apiResource="assets",e.state={asset:{id:"",contentType:"",title:"",dateCreated:"",dateModified:"",url:""},redirect:!1,isLoading:!1,selectedFile:""},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){if(this.state.redirect)return i.a.createElement(o.a,{to:"/assets"});var e="ui ".concat(this.state.isLoading?"active":""," inverted dimmer");return i.a.createElement("div",null,i.a.createElement("h1",null,"New Asset"),i.a.createElement("div",{className:e},i.a.createElement("div",{className:"ui text loader"},"Working...")),i.a.createElement(T,{asset:this.state.asset,isNew:!0,onFormSubmit:this.createAsset,onFormCancel:this.onFormCancel}))}}]),t}(i.a.Component),q=function(){return i.a.createElement("div",{className:"ui container"},i.a.createElement(s.a,{basename:"/"},i.a.createElement(l,null),i.a.createElement(o.b,{path:"/",exact:!0,component:N}),i.a.createElement(o.b,{path:"/content/edit/:id",exact:!0,component:j}),i.a.createElement(o.b,{path:"/content/new",exact:!0,component:O}),i.a.createElement(o.b,{path:"/assets",exact:!0,component:F}),i.a.createElement(o.b,{path:"/assets/edit/:id",exact:!0,component:L}),i.a.createElement(o.b,{path:"/assets/new",exact:!0,component:P})))};c.a.render(i.a.createElement(q,null),document.querySelector("#root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.b44f9dee.chunk.js.map